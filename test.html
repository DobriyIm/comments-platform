<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>File Transfer via WebSocket</title>
	</head>
	<body>
		<input type="file" id="fileInput" />
		<button onclick="sendFile()">Send File</button>

		<script>
			const socket = new WebSocket('ws://localhost:3000');

			function sendFile() {
				const fileInput = document.getElementById('fileInput');
				const file = fileInput.files[0];

				const reader = new FileReader();
				reader.onload = async event => {
					const base64Data = event.target.result.split(',')[1]; // get base64 data

					const payload = {
						event: 'TEST',
						data: {
							fileName: file.name,
							fileType: file.type,
							fileData: base64Data
						}
					};

					socket.send(JSON.stringify(payload));
				};

				reader.readAsDataURL(file);
			}
		</script>
	</body>
</html>
